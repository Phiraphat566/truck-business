<div
  class="min-h-screen bg-transparent bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-slate-900 dark:text-slate-100"
  [class.dark]="isDark"
>
<!-- HEADER (ใหม่) -->
<header class="bg-white shadow-sm border-b border-gray-100 dark:bg-slate-900 dark:border-slate-800">
  <div class="max-w-7xl mx-auto px-4 py-6 ">
    <div class="flex items-start justify-between gap-4">
      <!-- ซ้าย: ไอคอน + หัวข้อ + คำบรรยาย -->
      <div class="flex items-start gap-3">
        
        <div>
          <h1 class="text-2xl font-bold text-gray-900 dark:text-slate-100">จัดการทีมงานรับเหมา</h1>
          <p class="text-gray-500 dark:text-slate-400">ดูโปรไฟล์/ไซต์งาน/เอกสารความปลอดภัย</p>
        </div>
      </div>
      

      <!-- ขวา: ค้นหา + ส่งออก + ปุ่ม -->
      <div class="flex flex-wrap items-center justify-end gap-3 w-full max-w-3xl">
        <!-- ช่องค้นหา -->
        <div class="relative flex-1 min-w-[220px] max-w-[380px]">
          <input
            type="text"
            [(ngModel)]="searchTerm"
            placeholder="ค้นหาชื่อหรือรหัสพนักงาน..."
            class="w-full bg-gray-50 border border-gray-200 rounded-lg px-3 py-2.5 pl-10 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400" />
          <svg class="absolute left-3 top-3.5 w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>

        

        <!-- เพิ่มพนักงาน -->
        <button type="button"
                (click)="openAddPopup()"
                class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-5 py-2.5 rounded-lg font-medium hover:from-indigo-600 hover:to-purple-700 transition-all shadow-md">
          เพิ่มพนักงาน
        </button>

        <!-- โหมดแก้ไข -->
        <button type="button"
                (click)="editingMode = !editingMode"
                [attr.aria-pressed]="editingMode"
                class="px-4 py-2.5 rounded-lg font-medium border transition"
                [ngClass]="editingMode
                  ? 'bg-amber-100 text-amber-700 border-amber-300'
                  : 'bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200'">
          {{ editingMode ? 'ออกจากโหมดแก้ไข' : 'โหมดแก้ไข' }}
        </button>


    <!-- สวิตช์โหมด -->
      <label class="inline-flex items-center gap-3 cursor-pointer select-none">
        <span class="text-sm text-gray-600 dark:text-slate-300">
        {{ isDark ? '' : '' }}
          </span>

      <!-- ใช้ input เป็นตัวควบคุมสถานะ -->
      <input
        type="checkbox"
        class="sr-only peer"
        [checked]="isDark"
        (change)="toggleTheme()"
        aria-label="Toggle dark mode"
      />

      <!-- แทร็ก (พื้นหลังของสวิตช์) -->
      <div
        class="relative w-16 h-9 rounded-full transition-colors duration-300
              bg-gray-200 peer-checked:bg-emerald-500
              border border-gray-300 peer-checked:border-emerald-500"
      >
        <!-- ปุ่มกลม  -->
        <span
          class="switch-thumb absolute top-1 left-1 w-7 h-7 rounded-full bg-white
                transition-transform duration-300
                peer-checked:translate-x-7
                border border-white"
        ></span>
      </div>
</label>

      </div>
    </div>
  </div>
 </header>

  <div class="max-w-7xl mx-auto px-4 py-8">
   
    <!-- สรุปสถิติ 3 ใบ -->
    <section class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8">
      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-5 dark:bg-slate-900 dark:border-slate-800">
        <div class="text-sm text-gray-500 mb-1">พนักงานทั้งหมด</div>
        <div class="text-3xl font-bold ">{{ totalEmployees }}</div>
      </div>

      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-5 dark:bg-slate-900 dark:border-slate-800">
        <div class="flex items-center justify-between mb-1">
          <div class="text-sm text-gray-500">ทำงานอยู่</div>
          <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700">ทำงานอยู่</span>
        </div>
        <div class="text-3xl font-bold ">{{ workingCount }}</div>
      </div>

      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-5 dark:bg-slate-900 dark:border-slate-800">
        <div class="flex items-center justify-between mb-1">
          <div class="text-sm text-gray-500">ลาพัก</div>
          <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-700">ลาพัก</span>
        </div>
        <div class="text-3xl font-bold ">{{ leaveCount }}</div>
      </div>
    </section>

<!-- Employee Table -->
<section class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden
                dark:bg-slate-900 dark:border-slate-800">
  <div class="px-6 py-4 border-b border-gray-100 dark:border-slate-800">
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold text-gray-900 dark:text-slate-100">รายชื่อพนักงาน</h2>
      <span class="text-sm text-gray-500 dark:text-slate-400">{{ filteredEmployees.length }} คน</span>
    </div>
  </div>

  <div class="overflow-x-auto">
    <table class="w-full">
      <thead class="bg-gray-50 border-b border-gray-200 sticky top-0 z-10
                    dark:bg-slate-800 dark:border-slate-700">
        <tr>
          <!-- เพิ่ม dark:text-slate-400 ทุกหัวคอลัมน์ -->
          <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">พนักงาน</th>
          <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">รหัส</th>
          <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">ตำแหน่ง</th>
          <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">ติดต่อ</th>
          <th *ngIf="editingMode" class="px-6 py-4 text-center text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">จัดการ</th>
        </tr>
      </thead>

      <!-- เพิ่ม dark:divide-slate-800 ให้เส้นแบ่ง -->
      <tbody class="divide-y divide-gray-200 dark:divide-slate-800">
        <tr *ngFor="let emp of filteredEmployees; let i = index"
            class="hover:bg-gray-50 dark:hover:bg-slate-800 cursor-pointer transition-colors duration-150"
            (click)="showDetail(emp)">
          <td class="px-6 py-4">
            <div class="flex items-center space-x-4">
              <div class="relative">
                <img [src]="emp.imageUrl || 'assets/placeholder.png'"
                     alt="photo"
                     class="w-12 h-12 rounded-full object-cover border-2 border-gray-200 dark:border-slate-700" />
                <!-- เพิ่ม dark:border-slate-900 ให้กรอบจุดสถานะ -->
                <div
                  class="absolute -bottom-0.5 -right-0.5 w-4 h-4 rounded-full border-2 border-white dark:border-slate-900"
                  [ngClass]="statusDotClass(emp.status)"
                  [title]="statusLabel(emp.status)">
                </div>
              </div>
              <div class="flex-1 min-w-0">
                <!-- ชื่อ: เพิ่ม dark:text-slate-100 -->
                <p class="text-sm font-semibold text-gray-900 dark:text-slate-100">
                  {{ emp.firstName }} {{ emp.lastName }}
                </p>
                <!-- อีเมล: เพิ่ม dark:text-slate-400 -->
                <p class="text-sm text-gray-500 dark:text-slate-400 truncate">
                  {{ emp.email || 'ไม่มีอีเมล' }}
                </p>
              </div>
            </div>
          </td>

          <td class="px-6 py-4">
            <!-- ป้ายรหัส: เพิ่มพื้นหลัง/สีตัวอักษรฝั่งมืด -->
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                         bg-blue-100 text-blue-800
                         dark:bg-blue-900/40 dark:text-blue-200">
              {{ emp.id || ('ED00' + (i + 1)) }}
            </span>
          </td>

          <td class="px-6 py-4">
            <div class="flex items-center">
              <div class="w-2 h-2 bg-indigo-400 rounded-full mr-2"></div>
              <!-- ตำแหน่ง: เพิ่ม dark:text-slate-200 -->
              <span class="text-sm text-gray-900 dark:text-slate-200">{{ emp.position }}</span>
            </div>
          </td>

          <td class="px-6 py-4">
            <div class="flex flex-col space-y-1">
              <!-- เบอร์โทร -->
              <span class="text-sm text-gray-900 dark:text-slate-200">{{ emp.phone || 'ไม่มีเบอร์โทร' }}</span>

            </div>
          </td>

          <td *ngIf="editingMode" class="px-6 py-4">
            <div class="flex items-center justify-center space-x-2">
              <!-- ปุ่มแก้ไข: เพิ่มชุดสีฝั่งมืด -->
              <button type="button"
                      (click)="openEditPopupFor(i); $event.stopPropagation()"
                      class="w-8 h-8 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-lg flex items-center justify-center transition-colors
                             dark:bg-blue-900/30 dark:hover:bg-blue-900/40 dark:text-blue-200">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                </svg>
              </button>

              <!-- ปุ่มลบ: เพิ่มชุดสีฝั่งมืด -->
              <button type="button"
                      (click)="confirmDelete(i); $event.stopPropagation()"
                      class="w-8 h-8 bg-red-100 hover:bg-red-200 text-red-600 rounded-lg flex items-center justify-center transition-colors
                             dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:text-red-200">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
              </button>
            </div>
          </td>
        </tr>

            <!-- Empty State -->
            <tr *ngIf="filteredEmployees.length === 0">
              <td [attr.colspan]="editingMode ? 5 : 4" class="px-6 py-16 text-center">
                <div class="flex flex-col items-center justify-center">
                  <svg class="w-16 h-16 text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                      d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0z">
                    </path>
                  </svg>
                  <h3 class="text-lg font-medium text-gray-900 mb-2">ไม่พบข้อมูลพนักงาน</h3>
                  <p class="text-gray-500 mb-4">{{ searchTerm ? 'ลองค้นหาด้วยคำค้นอื่นหรือเพิ่มพนักงานใหม่' : 'เริ่มต้นโดยการเพิ่มพนักงานคนแรก' }}</p>
                  <button type="button"
                          (click)="openAddPopup()"
                          class="inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    เพิ่มพนักงาน
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </div>

  <!-- Delete Confirmation Modal -->
  <div *ngIf="showDeleteConfirm && deleteIndex !== null" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 backdrop-blur-sm">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden">
      <div class="p-6">
        <div class="flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4">
          <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z">
            </path>
          </svg>
        </div>
        <h2 class="text-xl font-semibold text-center text-gray-900 mb-2">ยืนยันการลบพนักงาน</h2>
        <p class="text-center text-gray-600 mb-6">
          คุณต้องการลบพนักงาน
          <span class="font-semibold text-gray-900">{{ employees[deleteIndex]?.firstName || '' }} {{ employees[deleteIndex]?.lastName || '' }}</span>
          ใช่หรือไม่?
        </p>
        <div class="flex space-x-3">
          <button type="button" (click)="showDeleteConfirm = false" [disabled]="isLoading"
                  class="flex-1 px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors disabled:opacity-50">
            ยกเลิก
          </button>
          <button type="button" (click)="deleteEmployee(deleteIndex!)" [disabled]="isLoading"
                  class="flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center">
            <svg *ngIf="isLoading" class="animate-spin -ml-1 mr-3 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" aria-hidden="true">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            {{ isLoading ? 'กำลังลบ...' : 'ลบพนักงาน' }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Toast -->
  <div *ngIf="showToast" class="fixed top-6 right-6 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg z-[100] flex items-center space-x-3">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
    </svg>
    <span class="font-medium">{{ toastMessage }}</span>
  </div>

  <!-- Add/Edit Employee Modal -->
  <div *ngIf="showPopup" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 backdrop-blur-sm">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden">
      <div class="bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4">
        <h2 class="text-xl font-semibold text-white">{{ editingMode ? 'แก้ไขข้อมูลพนักงาน' : 'เพิ่มพนักงานใหม่' }}</h2>
        <p class="text-indigo-100 text-sm mt-1">กรอกข้อมูลพนักงานให้ครบถ้วน</p>
      </div>
      <form (ngSubmit)="submitForm()" class="p-6 space-y-4">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">ชื่อ</label>
            <input [(ngModel)]="form.firstName" name="firstName" placeholder="ชื่อจริง"
                   class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" required />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">นามสกุล</label>
            <input [(ngModel)]="form.lastName" name="lastName" placeholder="นามสกุล"
                   class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" required />
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">ตำแหน่งงาน</label>
          <select [(ngModel)]="form.position" name="position"
                  class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors">
            <option value="">เลือกตำแหน่ง</option>
            <option value="คนขับรถสิบล้อ">คนขับรถสิบล้อ</option>
            <option value="พนักงานออฟฟิส">พนักงานออฟฟิส</option>
            <option value="หัวหน้างาน">หัวหน้างาน</option>
            <option value="ช่างซ่อม">ช่างซ่อม</option>
          </select>
        </div>

        <!--<div>
          <label class="block text-sm font-medium text-gray-700 mb-2">รหัสพนักงาน</label>
          <input [(ngModel)]="form.id" name="id" placeholder="ED001"
                 class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" />
        </div>  -->
       

        <div class="grid grid-cols-1 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">อีเมล</label>
            <input [(ngModel)]="form.email" name="email" type="email" placeholder="example@company.com"
                   class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">เบอร์โทรศัพท์</label>
            <input [(ngModel)]="form.phone" name="phone" placeholder="081-234-5678"
                   class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" />
          </div>
        </div>

        <div>
  <label class="block text-sm font-medium text-gray-700 mb-2">อัปโหลดรูปภาพ</label>

  <div class="flex items-center gap-3">
    <input type="file"
           accept="image/*"
           (change)="onFileSelected($event)"
           class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"/>

    <button type="button"
            *ngIf="selectedFile"
            (click)="clearSelectedFile()"
            class="px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm">
      ล้าง
    </button>
  </div>

  <!-- พรีวิวรูป: ถ้าเลือกไฟล์ใหม่ให้แสดงพรีวิว, ถ้าแก้ไขและยังไม่เลือกไฟล์ให้แสดงรูปเดิม -->
  <div class="mt-3 flex items-center gap-3" *ngIf="imagePreview || form.imageUrl">
    <img [src]="imagePreview || form.imageUrl"
         alt="preview"
         class="w-16 h-16 rounded-full object-cover border"/>
    <span class="text-xs text-gray-500">
      รองรับ JPG/PNG ขนาดไม่เกิน 5MB
    </span>
  </div>
 </div>

        <div class="flex space-x-3 pt-4">
          <button type="button" (click)="closePopup()" [disabled]="isLoading"
                  class="flex-1 px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors disabled:opacity-50">
            ยกเลิก
          </button>
          <button type="submit" [disabled]="isLoading"
                  class="flex-1 px-4 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50 flex items-center justify-center">
            <svg *ngIf="isLoading" class="animate-spin -ml-1 mr-3 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" aria-hidden="true">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            {{ isLoading ? 'กำลังบันทึก...' : (editingMode ? 'บันทึกการแก้ไข' : 'เพิ่มพนักงาน') }}
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Detail Modal -->
<div *ngIf="showDetailPopup"
     class="fixed inset-0 bg-black/50 dark:bg-black/60 flex justify-center items-center z-50 backdrop-blur-sm">
  <!-- กล่องหลัก -->
  <div
    class="bg-white dark:bg-slate-900 dark:text-slate-100 rounded-2xl shadow-2xl w-full max-w-lg mx-4 overflow-hidden
           border border-transparent dark:border-slate-800 transition-colors">
    <!-- Header ยังเป็น gradient ได้เหมือนเดิม -->
    <div class="bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-8 text-center">
      <div class="relative inline-block">
        <img [src]="selectedEmployee?.imageUrl || 'assets/placeholder.png'" alt="photo"
             class="w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg mx-auto" />

        <!-- วงกลมสถานะ -->
        <div class="absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-4 border-white dark:border-slate-900"
             [ngClass]="statusDotClass(selectedEmployee?.status)"
             [title]="statusLabel(selectedEmployee?.status)">
        </div>
      </div>
      <h2 class="text-2xl font-bold text-white mt-4">
        {{ selectedEmployee?.firstName }} {{ selectedEmployee?.lastName }}
      </h2>
      <p class="text-indigo-100 mt-1">{{ selectedEmployee?.position }}</p>
    </div>

    <div class="p-6 space-y-4">
      <div class="grid grid-cols-1 gap-4">

        <!-- กล่องข้อมูล: รหัสพนักงาน -->
        <div class="flex items-center space-x-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg transition-colors">
          <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-blue-600 dark:text-blue-300" fill="none" stroke="currentColor"
                 viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V4a2 2 0 012-2h2a2 2 0 012 2v2m-4 0a2 2 0 01-2 2H9a2 2 0 01-2-2m0 0V4a2 2 0 012-2h2a2 2 0 012 2v2">
              </path>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium text-gray-600 dark:text-slate-400">รหัสพนักงาน</p>
            <p class="text-gray-900 dark:text-slate-100 font-semibold">
              {{ selectedEmployee?.id || 'ไม่ระบุ' }}
            </p>
          </div>
        </div>

        <!-- อีเมล -->
        <div class="flex items-center space-x-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg transition-colors">
          <div class="w-10 h-10 bg-green-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-green-600 dark:text-emerald-300" fill="none" stroke="currentColor"
                 viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
              </path>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium text-gray-600 dark:text-slate-400">อีเมล</p>
            <p class="text-gray-900 dark:text-slate-100 font-semibold">
              {{ selectedEmployee?.email || 'ไม่มีข้อมูล' }}
            </p>
          </div>
        </div>

        <!-- เบอร์โทร -->
        <div class="flex items-center space-x-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg transition-colors">
          <div class="w-10 h-10 bg-purple-100 dark:bg-violet-900/30 rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-purple-600 dark:text-violet-300" fill="none" stroke="currentColor"
                 viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z">
              </path>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium text-gray-600 dark:text-slate-400">เบอร์โทรศัพท์</p>
            <p class="text-gray-900 dark:text-slate-100 font-semibold">
              {{ selectedEmployee?.phone || 'ไม่มีข้อมูล' }}
            </p>
          </div>
        </div>

        <!-- สถานะวันนี้ -->
        <div class="flex items-center space-x-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg transition-colors">
          <div class="w-10 h-10 rounded-lg flex items-center justify-center"
               [ngClass]="{
                 'bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-300': selectedEmployee?.status === 'WORKING',
                 'bg-amber-100   text-amber-700   dark:bg-amber-900/30   dark:text-amber-300'  : selectedEmployee?.status === 'ON_LEAVE',
                 'bg-rose-100    text-rose-600    dark:bg-rose-900/30    dark:text-rose-300'   : selectedEmployee?.status === 'OFF_DUTY',
                 'bg-gray-100    text-gray-600    dark:bg-slate-700      dark:text-slate-300'  : !selectedEmployee?.status || selectedEmployee?.status === 'NOT_CHECKED_IN'
               }">
            <!-- ไอคอนสลับตามสถานะ (เหมือนเดิม) -->
            <ng-container [ngSwitch]="selectedEmployee?.status">
              <!-- WORKING -->
              <svg *ngSwitchCase="'WORKING'" class="w-5 h-5" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="7" width="18" height="13" rx="2" ry="2"></rect>
                <path d="M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"></path>
                <path d="M3 12h18"></path>
              </svg>
              <!-- ON_LEAVE -->
              <svg *ngSwitchCase="'ON_LEAVE'" class="w-5 h-5" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 3a9 9 0 0 0-9 9h18A9 9 0 0 0 12 3z"></path>
                <path d="M12 12v6"></path>
                <path d="M12 18a3 3 0 0 0 3-3"></path>
              </svg>
              <!-- OFF_DUTY -->
              <svg *ngSwitchCase="'OFF_DUTY'" class="w-5 h-5" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.8A9 9 0 1 1 11.2 3a7 7 0 1 0 9.8 9.8z"></path>
              </svg>
              <!-- NOT_CHECKED_IN -->
              <svg *ngSwitchDefault class="w-5 h-5" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="9"></circle>
                <path d="M12 7v5l3 3"></path>
              </svg>
            </ng-container>
          </div>

          <div class="flex-1">
            <p class="text-sm font-medium text-gray-600 dark:text-slate-400">สถานะวันนี้</p>
            <div class="flex items-center gap-2">
              <span class="w-2.5 h-2.5 rounded-full" [ngClass]="statusDotClass(selectedEmployee?.status)"></span>
              <p class="text-gray-900 dark:text-slate-100 font-semibold">
                {{ statusLabel(selectedEmployee?.status) }}
              </p>
            </div>
          </div>
        </div>

      </div>

      <!-- ปุ่ม -->
      <div class="flex space-x-3 pt-4">
        <button type="button" (click)="closeDetailPopup()"
                class="flex-1 px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700
                       dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-100
                       font-medium rounded-lg transition-colors">
          ปิด
        </button>
        <button type="button" (click)="editSelectedEmployee()"
                class="flex-1 px-4 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-600
                       hover:from-indigo-600 hover:to-purple-700 text-white font-medium rounded-lg
                       transition-all duration-200">
          แก้ไขข้อมูล
        </button>
      </div>
    </div>
  </div>
</div>

</div>
